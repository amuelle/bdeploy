<button
  mat-raised-button
  fxFlex="1 0 auto"
  [class.local-button-color]="!inverseColor && !isToggle"
  [class.local-button-expanded]="!collapsed"
  [class.local-button-collapsed]="collapsed"
  [class.bd-inverted-color]="!(isToggle && toggle) && inverseColor"
  [class.bd-toggle-highlight]="isToggle && toggle"
  [matTooltip]="tooltip ? text : ''"
  [matTooltipPosition]="tooltip"
  [disabled]="disabled"
  [type]="isSubmit ? 'submit' : 'button'"
>
  <div fxLayout="row" fxLayoutGap="5px" [class.local-wrapper-expanded]="!collapsed" [class.local-wrapper-collapsed]="collapsed">
    <mat-icon *ngIf="icon && !(loadingWhen$ | async)" [matBadge]="badge" [matBadgeHidden]="!badge" matBadgeSize="small" [matBadgeColor]="badgeColor">{{
      icon
    }}</mat-icon>
    <mat-spinner *ngIf="loadingWhen$ | async" [diameter]="24"></mat-spinner>
    <span
      *ngIf="text && !collapsed"
      [fxFlex]="!icon ? '1 0 auto' : '0 0 auto'"
      [@delayedFadeIn]="{ value: 'dummy', params: { delay: '0.05s' } }"
      [@scaleWidthFromZero]
      >{{ text }}</span
    >
    <ng-content></ng-content>
  </div>
</button>
