<button
  [style.cursor]="'pointer'"
  mat-raised-button
  [attr.data-cy]="text"
  fxFlex="1 0 auto"
  [ngClass]="getColorClass()"
  [class.local-button-expanded]="!collapsed"
  [class.local-button-collapsed]="collapsed"
  [matTooltip]="tooltip ? text : ''"
  [matTooltipPosition]="tooltip"
  [disabled]="disabled"
  [type]="isSubmit ? 'submit' : 'button'"
>
  <div fxLayout="row" [class.local-wrapper-expanded]="!collapsed" [class.local-wrapper-collapsed]="collapsed">
    <mat-icon
      *ngIf="icon && !svgIcon && !(loadingWhen$ | async)"
      class="local-icon-position"
      [matBadge]="badge"
      [matBadgeHidden]="!badge"
      matBadgeSize="small"
      [matBadgeColor]="badgeColor"
      >{{ icon }}</mat-icon
    >
    <mat-icon
      *ngIf="svgIcon && !(loadingWhen$ | async)"
      class="local-icon-position"
      [svgIcon]="svgIcon"
      [matBadge]="badge"
      [matBadgeHidden]="!badge"
      matBadgeSize="small"
      [matBadgeColor]="badgeColor"
    ></mat-icon>
    <mat-spinner *ngIf="loadingWhen$ | async" [diameter]="24" class="bd-inherited-spinner" [class.local-spinner]="!collapsed"></mat-spinner>
    <span
      *ngIf="text && !collapsed"
      [ngClass]="(!!icon || !!svgIcon) && !(loadingWhen$ | async) ? 'local-label-position' : []"
      [fxFlex]="!icon && !svgIcon ? '1 0 auto' : '0 0 auto'"
      [@scaleWidthFromZero]
      >{{ text }}</span
    >
    <ng-content></ng-content>
  </div>
</button>
