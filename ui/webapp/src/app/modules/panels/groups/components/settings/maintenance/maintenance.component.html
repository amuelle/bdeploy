<app-bd-dialog>
  <app-bd-dialog-toolbar header="Instance Group Maintenance" [closeablePanel]="true"></app-bd-dialog-toolbar>

  <app-bd-dialog-content>
    <div fxLayout="column" fxLayoutGap="10px" *ngIf="groups.current$ | async as group">
      <div>The following maintenance actions are to be used with care.</div>
      <app-bd-button
        text="Repair BHive Problems"
        icon="build"
        [collapsed]="false"
        (click)="onRepair(group)"
        [loadingWhen$]="repairing$"
        [disabled]="!auth.isCurrentScopeAdmin() || (repairing$ | async)"
      ></app-bd-button>
      <app-bd-button
        text="Prune unused data in BHive"
        icon="delete_sweep"
        [collapsed]="false"
        (click)="onPrune(group)"
        [loadingWhen$]="pruning$"
        [disabled]="!auth.isCurrentScopeWrite() || (pruning$ | async)"
      ></app-bd-button>
      <app-bd-button
        text="Delete Instance Group"
        icon="delete"
        [collapsed]="false"
        (click)="onDelete(group)"
        [disabled]="!auth.isCurrentScopeAdmin() || (deleting$ | async)"
        [loadingWhen$]="deleting$"
        color="toolbar"
      ></app-bd-button>
      <mat-divider></mat-divider>
      <app-bd-panel-button
        [collapsed]="false"
        text="Back to overview"
        icon="arrow_back"
        [toggle]="false"
        [route]="['..']"
        [relative]="true"
      ></app-bd-panel-button>
    </div>
  </app-bd-dialog-content>
</app-bd-dialog>
